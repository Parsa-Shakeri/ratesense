<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <title>RateSense — Calculator</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js" defer></script>
  <script src="app.js" defer></script>
</head>
<body>
  <header class="site-header">
    <a class="brand" href="index.html">
      <div class="brandMark">RS</div>
      <div class="brandText">
        <div class="brandTitle">RateSense</div>
        <div class="brandSub">Rate impact, stress testing, and reporting.</div>
      </div>
    </a>

    <button class="hamburger" id="menuBtn" aria-label="Open menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>

    <nav class="nav" id="nav">
      <a class="active" href="index.html">Calculator</a>
      <a href="rates.html">Live Rates</a>
      <a href="stress.html">Stress Test</a>
      <a href="compare.html">Compare</a>
      <a href="case-study.html">Case Study</a>
    </nav>
  </header>

  <main class="container">
    <section class="hero">
      <div>
        <h1>Turn “rates moved” into dollar impact.</h1>
        <p class="muted">
          Compare monthly payments, total interest, and run stress tests including ARM behavior.
        </p>
      </div>
      <div class="heroActions">
        <a class="btn primary" href="stress.html">Run a stress test</a>
        <a class="btn" href="rates.html">Pull live rates</a>
      </div>
    </section>

    <section class="grid two">
      <section class="card">
        <div class="cardHeader">
          <h2>Calculator</h2>
          <div class="pill">Baseline vs scenario</div>
        </div>

        <div class="formGrid two">
          <div class="field">
            <label for="loanType">Loan type</label>
            <select id="loanType">
              <option value="mortgage" selected>Mortgage</option>
              <option value="auto">Auto loan</option>
              <option value="student">Student loan</option>
              <option value="creditcard">Credit card</option>
            </select>
          </div>

          <div class="field">
            <label for="principal">Loan balance ($)</label>
            <input id="principal" inputmode="decimal" placeholder="e.g., 350000" />
          </div>

          <div class="field amortizedOnly">
            <label for="termYears">Loan length (years)</label>
            <input id="termYears" inputmode="decimal" placeholder="e.g., 30" />
          </div>

          <div class="field">
            <label for="apr">Annual interest rate (%)</label>
            <input id="apr" inputmode="decimal" placeholder="e.g., 6.50" />
            <div class="hint">Tip: use <a href="rates.html">Live Rates</a> to copy/paste.</div>
          </div>

          <div class="field amortizedOnly">
            <label for="extraPayment">Extra monthly payment ($)</label>
            <input id="extraPayment" inputmode="decimal" value="0" />
          </div>

          <div class="field">
            <label for="delta">Scenario increase</label>
            <select id="delta">
              <option value="0" selected>0.00%</option>
              <option value="0.25">0.25%</option>
              <option value="0.50">0.50%</option>
              <option value="1.00">1.00%</option>
              <option value="custom">Custom</option>
            </select>
          </div>

          <div class="field" id="customDeltaWrap" style="display:none;">
            <label for="customDelta">Custom increase (%)</label>
            <input id="customDelta" inputmode="decimal" placeholder="e.g., 1.75" />
          </div>

          <div class="field creditOnly" style="display:none;">
            <label for="ccMode">Credit card payment style</label>
            <select id="ccMode">
              <option value="minimum" selected>Minimum payment (approx.)</option>
              <option value="fixed">Fixed payment</option>
            </select>
          </div>

          <div class="field creditOnly" style="display:none;">
            <label for="ccFixedPayment">Fixed monthly payment ($)</label>
            <input id="ccFixedPayment" inputmode="decimal" placeholder="e.g., 200" />
          </div>

          <div class="field mortgageOnly">
            <label for="annualTax">Annual property tax ($)</label>
            <input id="annualTax" inputmode="decimal" placeholder="e.g., 7200" />
          </div>

          <div class="field mortgageOnly">
            <label for="annualIns">Annual homeowners insurance ($)</label>
            <input id="annualIns" inputmode="decimal" placeholder="e.g., 1800" />
          </div>

          <div class="field mortgageOnly">
            <label for="monthlyHOA">Monthly HOA / condo fees ($)</label>
            <input id="monthlyHOA" inputmode="decimal" value="0" />
          </div>
        </div>

        <div class="actions">
          <button id="calcBtn" class="btn primary">Calculate</button>
          <button id="resetBtn" class="btn">Reset</button>
          <div id="status" class="status"></div>
        </div>

        <div class="miniActions">
          <button id="copyBtn" class="btn small">Copy summary</button>
          <button id="shareBtn" class="btn small">Copy share link</button>
          <button id="csvBtn" class="btn small">Download schedule (CSV)</button>
          <button id="printBtn" class="btn small">Print</button>
          <button id="pdfBtn" class="btn small">Download PDF</button>
        </div>
      </section>

      <section class="card">
        <div class="cardHeader">
          <h2>Results</h2>
          <div class="pill">Fast read</div>
        </div>

        <div class="kpiGrid">
          <div class="kpi">
            <div class="k">Baseline monthly payment</div>
            <div id="baseMonthly" class="v">—</div>
            <div id="baseNote" class="s muted"></div>
          </div>
          <div class="kpi">
            <div class="k">Scenario monthly payment</div>
            <div id="newMonthly" class="v">—</div>
            <div id="deltaMonthly" class="s muted">—</div>
          </div>
          <div class="kpi">
            <div class="k">Baseline total interest</div>
            <div id="baseInterest" class="v">—</div>
            <div id="baseTotalPaid" class="s muted">—</div>
          </div>
          <div class="kpi">
            <div class="k">Scenario total interest</div>
            <div id="newInterest" class="v">—</div>
            <div id="deltaInterest" class="s muted">—</div>
          </div>
        </div>

        <div id="pitiRow" class="callout" style="display:none;">
          <div class="calloutHeader">
            <h3>Total monthly housing cost</h3>
            <span class="pill">Mortgage only</span>
          </div>
          <div class="kpiGrid two">
            <div class="kpi compact">
              <div class="k muted">Baseline</div>
              <div id="basePITI" class="v">—</div>
            </div>
            <div class="kpi compact">
              <div class="k muted">Scenario</div>
              <div id="newPITI" class="v">—</div>
            </div>
          </div>
          <div class="muted">Includes loan payment + taxes + insurance + fees.</div>
          <div class="kpiGrid three">
            <div class="kpi compact"><div class="k muted">Add-ons (monthly)</div><div id="pitiAddons" class="v">—</div></div>
            <div class="kpi compact"><div class="k muted">Change ($)</div><div id="pitiDeltaAbs" class="v">—</div></div>
            <div class="kpi compact"><div class="k muted">Change (%)</div><div id="pitiDeltaPct" class="v">—</div></div>
          </div>
        </div>

        <div class="cardSubgrid">
          <div class="subcard">
            <h3>Scenario table</h3>
            <div class="tableWrap">
              <table id="scenarioTable">
                <thead>
                <tr>
                  <th>Scenario</th><th>APR</th><th>Monthly payment</th><th>Total interest</th><th>Δ monthly</th><th>Δ interest</th>
                </tr>
                </thead>
                <tbody>
                  <tr><td colspan="6" class="muted">Run a calculation to populate scenarios.</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="subcard">
            <div class="row space">
              <h3>Chart</h3>
              <div class="seg">
                <button id="chartBalanceBtn" class="btn small">Balance</button>
                <button id="chartSplitBtn" class="btn small">Interest vs principal</button>
              </div>
            </div>
            <div class="chartWrap">
              <canvas id="chart"></canvas>
            </div>
          </div>
        </div>

        <section class="printOnly">
          <h2>RateSense Report</h2>
          <div id="reportDate" class="muted"></div>
          <pre id="reportInputs" class="report"></pre>
          <pre id="reportResults" class="report"></pre>
          <pre id="reportRefi" class="report"></pre>
        </section>
      </section>
    </section>

    <footer class="site-footer">
      <div class="muted">Educational tool only. Not financial advice.</div>
    </footer>
  </main>
</body>
</html>
